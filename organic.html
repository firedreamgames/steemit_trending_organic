<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Organic_Trending</title>
  <meta name="generator" content="Google Web Designer 3.0.1.0319">
  <style type="text/css" id="gwd-text-style">
    p {
      margin: 0px;
    }
    h1 {
      margin: 0px;
    }
    h2 {
      margin: 0px;
    }
    h3 {
      margin: 0px;
    }
  </style>
  <style type="text/css">
    html, body {
      width: 100%;
      height: 100%;
      margin: 0px;
    }
    body {
      background-color: transparent;
      transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      transform-style: preserve-3d;
      width: 1300px;
      height: 550px;
    }
    .gwd-p-pndd {
      position: absolute;
      height: 54px;
      text-align: center;
      width: 900px;
      left: 200px;
      top: 10px;
    }
    .gwd-h1-1ez0 {
      position: absolute;
      width: 422px;
      height: 28px;
      text-align: center;
      left: 575px;
      top: 64px;
      color: rgb(68, 34, 239);
    }
    .gwd-div-6p60 {
      position: absolute;
      background-image: none;
      background-color: rgb(223, 219, 219);
      overflow: auto;
      width: 103.08%;
      height: 120%;
      left: 0.15%;
      top: 21.27%;
    }
    .gwd-div-38rd {
      position: absolute;
      width: 200px;
      left: 10px;
      top: 10px;
      height: 430px;
    }
    .gwd-div-vby6 {
      top: 10px;
      width: 700px;
      left: 320px;
      font-size: 20px;
    }
    .gwd-div-1ei9 {
      left: 110px;
    }
    .gwd-div-1kvn {
      width: 90px;
      left: 10px;
      text-align: center;
      font-size: 20px;
    }
    .gwd-div-1ns2 {
      top: 10px;
      left: 1030px;
      width: 100px;
    }
    .gwd-div-q53u {
      left: 1145px;
      width: 150px;
      text-align: center;
      font-size: 20px;
    }
    .gwd-p-edbb {
      position: absolute;
      transform-origin: -265.1px 299px 0px;
      height: 20px;
      text-align: center;
      left: 16px;
      top: 99px;
      width: 90px;
      font-weight: bold;
    }
    .gwd-p-1kka {
      width: 200px;
      text-align: center;
      left: 125px;
    }
    .gwd-p-3ej1 {
      left: 403px;
    }
    .gwd-p-1hx8 {
      left: 986px;
    }
    .gwd-p-1g1m {
      top: 99px;
      left: 1132px;
    }
    .gwd-div-16pi {
      text-align: center;
      font-size: 20px;
    }
    .gwd-div-1655 {
      text-align: center;
      font-size: 20px;
    }
    .gwd-div-1d6p {
      position: absolute;
      width: 130px;
      height: 71px;
      left: 664px;
      top: 242px;
    }
    .loader {
      border-width: 20px;
      border-style: solid;
      border-color: rgb(52, 152, 219) rgb(243, 243, 243) rgb(243, 243, 243);
      border-image: initial;
      border-radius: 50%;
      width: 100px;
      height: 100px;
      animation: spin 2s linear infinite;
    }
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    .gwd-p-13ux {
      position: absolute;
      width: 118px;
      height: 40px;
      text-align: right;
      top: 24px;
      color: rgb(28, 4, 151);
      font-size: 12px;
      left: 1182px;
    }
    .gwd-div-4l28 {
      position: absolute;
      width: 190px;
      height: 32px;
      top: 55px;
      left: 350px;
    }
    .gwd-select-15e9 {
      top: 0px;
      left: 0px;
      transform-style: preserve-3d;
      height: 20px;
      transform: translate3d(70px, 5px, 0px);
      width: 120px;
    }
    .gwd-p-wpmt {
      position: absolute;
      font-weight: bold;
      font-size: 20px;
      left: -1px;
      top: 3px;
    }
    .gwd-p-1a9u {
      left: 403px;
      top: 99px;
    }
    .gwd-div-1snt {
      position: absolute;
      width: 45.31%;
      left: 55px;
      top: 55px;
      background-image: none;
      background-color: transparent;
      height: 120%;
    }
    .gwd-div-19pf {
      position: absolute;
      width: 173px;
      height: 57px;
      left: 16px;
      top: 24px;
    }
    .gwd-input-1lyw {
      transform-style: preserve-3d;
      transform: translate3d(20px, 0px, 0px);
    }
    .gwd-div-n5t9 {
      position: absolute;
      width: 197.458px;
      background-image: none;
      left: 14px;
      top: 61px;
      background-color: rgb(241, 237, 237);
      height: 600px;
      overflow: auto;
    }
    .gwd-div-1jhm {
      left: 69px;
      top: 65px;
    }
    .gwd-div-1lwj {
      margin: 10px;
      top: 22px;
      left: 0px;
      border-style: none;
    }
    .gwd-div-dczj {
      left: 0px;
      top: 0px;
    }
    .gwd-input-e40c {
      border-style: outset;
      left: 232px;
      top: 86px;
    }
    .gwd-div-xush {
      border-radius: 0px;
    }
    .gwd-input-1sna {
      border-top-right-radius: 0px;
      transform: translate3d(480px, 60px, 0px);
    }
    .gwd-input-pru9 {
      top: 0px;
      transform-style: preserve-3d;
      left: 120px;
      transform: translate3d(180px, 60px, 0px);
    }
    .gwd-p-rywd {
      position: absolute;
      width: 114px;
      height: 22px;
      transform-origin: 118.75px 14.0625px 0px;
      text-align: center;
      left: 43px;
      top: 42px;
    }
    .gwd-input-11yr {
      transform-style: preserve-3d;
      top: 0px;
      left: 280px;
      transform: translate3d(200px, 100px, 0px);
    }
  </style>
</head>

<body class="htmlNoPages">
  <div class="gwd-div-1snt" id="bots_div">
    <div class="gwd-div-n5t9" id="name_the_bots"></div>
    <input id="add_new_bot" type="button" value=" Add New Bot " class="gwd-input-1lyw gwd-input-1sna" onclick="add_new_bot()">
    <input type="text" id="username" value="botname" class="gwd-input-pru9">
    <p class="gwd-p-rywd">Available Bots</p>
    <input id="close" type="button" value=" Close " onclick="close_bot()" class="gwd-input-11yr">
  </div>
  <script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
  <script language="JavaScript">
    steem.api.setOptions({
      url: 'https://api.steemit.com'
    });

    document.getElementById("bots_div").style.display = 'none';
     // bot names as global variable
    var bots = ["postdoctor", "moneymatchgaming", "slimwhale", "boostbot", "honestbot", "ebargains", "lost-ninja", "estream.studios", "adriatik", "redwhale", "minnowhelper", "mrswhale", "foxyd", "mitsuko", "dailyupvotes", "lovejuice", "steembloggers", "booster", "megabot", "voterunner", "authors.league", "canalcrypto", "whalebuilder", "mercurybot", "msp-bidbot", "promobot", "upmewhale", "redlambo", "lrd", "lightningbolt", "sunrawhale", "upyou", "thebot", "onlyprofitbot", "pushbot", "flymehigh", "nado.bot", "seakraken", "spydo", "childfund", "minnowvotes", "dolphinbot", "upme", "upboater", "proffit", "bluebot", "brupvoter", "oceanwhale", "jerrybanfield", "luckyvotes", "minnowfairy", "estabond", "bodzila", "peace-bot", "appreciator", "discordia", "emperorofnaps", "zapzap", "cryptoempire", "bearwards", "alphaprime", "therising", "buildawhale", "aksdwi", "sleeplesswhale", "isotonic", "noicebot", "upgoater", "dlivepromoter", "upmyvote", "youtake", "smartsteem", "fishbaitbot", "rocky1", "shares", "boomerang", "brandonfrye", "postpromoter", "pushup", "singing.beauty", "edensgarden", "pwrup", "inciter", "chronocrypto", "allaz", "sneaky-ninja"];



    steem.api.getTrendingTags("", 100, function(err, result) {



      var tags = [];

      for (let i = 1; i < result.length; i++) {
        tags[i] = result[i].name;
        document.getElementById('tags').add(new Option(tags[i]));
      }

      console.log(tags);
      document.getElementById('tags').disabled = true;
      document.getElementById('addbot').disabled = true;

      start(document.getElementById('tags').value);
    });





    var names = [];


    function re_start() {
      document.getElementById('tags').disabled = true;
       document.getElementById('addbot').disabled = true;
      
      
      spinner.style.display = "block"
      document.getElementById("order").innerHTML = "";
      document.getElementById("poster").innerHTML = "";
      document.getElementById("link").innerHTML = "";
      document.getElementById("vote_qty").innerHTML = "";
      document.getElementById("vote_value").innerHTML = "";

      start(document.getElementById('tags').value);
    }



    function start(val) {



      if (val == "all") {
        val = "";
        search(val);
      } else {
        search(val);
      }

    }

    function search(val)

     {

      var query = {
        tag: val,
        limit: 100
      };

      steem.api.getDiscussionsByTrending(query, function(err, result) {


        form_array1(result);

      });

    }

    function form_array1(result) {

      var post_array = [];
      post_array = result;


      var aut = result[99].author;
      var perm = result[99].permlink;
      var query = {
        tag: '',
        limit: 100,
        start_author: aut,
        start_permlink: perm
      };
      steem.api.getDiscussionsByTrending(query, function(err, result) {
        post_array = post_array.concat(result);

        form_array2(post_array);

      });


    }

    function form_array2(result) {

      var post_array = [];
      post_array = result;


      var aut = result[199].author;
      var perm = result[199].permlink;
      var query = {
        tag: '',
        limit: 100,
        start_author: aut,
        start_permlink: perm
      };
      steem.api.getDiscussionsByTrending(query, function(err, result) {
        post_array = post_array.concat(result);
        evaluate(post_array);


      });


    }


    function evaluate(result) {

      var activevotes = [];
      var activevoter = []
      var n_result = [];
      var control = 0;
      //console.log(bots.length,bots,result[0].active_votes.voter);

      var i = 0;

      for (let i = 0; i < result.length; i++) {
        control = 0;
        activevotes = result[i].active_votes;
        for (let j = 0; j < activevotes.length; j++) {

          if (bots.includes(activevotes[j].voter)) {
            control = 1;
          }
        }
        if (control == 0) {
          n_result.push(result[i]);
        }
      }

      write_div(n_result);
      console.log(n_result);

    }


    function write_div(result) {
      for (let i = 0; i < result.length; i++) {
        document.getElementById("order").innerHTML = document.getElementById("order").innerHTML + ((i + 1) + "<br>");
        document.getElementById("poster").innerHTML = document.getElementById("poster").innerHTML + (result[i].author + "<br>");
        var str = "https://steemit.com/@" + result[i].author + "/" + result[i].permlink;
        var lin = (result[i].permlink).substring(0, 60);

        document.getElementById("link").innerHTML = document.getElementById("link").innerHTML + lin.link(str) + "<br />";
        document.getElementById("vote_qty").innerHTML = document.getElementById("vote_qty").innerHTML + result[i].active_votes.length + "<br />";
        document.getElementById("vote_value").innerHTML = document.getElementById("vote_value").innerHTML + result[i].pending_payout_value + "<br />";

      }
      spinner.style.display = "none"
      document.getElementById('tags').disabled = false;
       document.getElementById('addbot').disabled = false;


    }

    function add_bot() {
      document.getElementById("bots_div").style.display = 'block';
      document.getElementById("main_container").style.display = 'none';
      document.getElementById("rank_tag").style.display = 'none';
      document.getElementById("author_tag").style.display = 'none';
      document.getElementById("tags_div").style.display = 'none';
      document.getElementById("link_tag").style.display = 'none';
      document.getElementById("votes_tag").style.display = 'none';
      document.getElementById("value_tag").style.display = 'none';
      document.getElementById("info_tag").style.display = 'none';
      document.getElementById("button_div").style.display = 'none';
      document.getElementById("name_the_bots").innerHTML="";
      for (let i = 0; i < bots.length; i++) {
         document.getElementById("name_the_bots").innerHTML=document.getElementById("name_the_bots").innerHTML+bots[i]+"<br />";
      }
      

    }
    
    function add_new_bot() {

     var new_bot = document.getElementById("username").value;
      if ((new_bot=="")||(new_bot=="botname")){
        
        window.alert("Please enter a valid bot name");
      }
      
      if ((new_bot!="")&&(new_bot!="botname")){
        bots.push(new_bot);
        var div_in=document.getElementById("name_the_bots").innerHTML
        document.getElementById("name_the_bots").innerHTML=new_bot+"<br />"+div_in;
        
      }
      
      
      
    }
    
    function close_bot(){
      document.getElementById("bots_div").style.display = 'none';
      document.getElementById("main_container").style.display = 'block';
      document.getElementById("rank_tag").style.display = 'block';
      document.getElementById("author_tag").style.display = 'block';
      document.getElementById("tags_div").style.display = 'block';
      document.getElementById("link_tag").style.display = 'block';
      document.getElementById("votes_tag").style.display = 'block';
      document.getElementById("value_tag").style.display = 'block';
      document.getElementById("info_tag").style.display = 'block';
      document.getElementById("button_div").style.display = 'block';
      re_start();
      
    }
    
  </script>
  <h1 class="gwd-p-pndd">STEEMIT ORGANIC TRENDING POSTS</h1><em class="gwd-h1-1ez0" id="info_tag">*Posts in trending page that didn't use upvote bots*</em>
  <div class="gwd-div-6p60" id="main_container">
    <div class="gwd-div-38rd gwd-div-1ei9 gwd-div-1655" id="poster"></div>
    <div class="gwd-div-38rd gwd-div-1ei9 gwd-div-1ns2 gwd-div-16pi" id="vote_qty"></div>
    <div class="gwd-div-38rd gwd-div-1ei9 gwd-div-1ns2 gwd-div-q53u" id="vote_value"></div>
    <div class="gwd-div-38rd gwd-div-1ei9 gwd-div-1kvn" id="order"></div>
    <div class="gwd-div-38rd gwd-div-vby6" id="link"></div>
  </div>
  <p class="gwd-p-edbb gwd-p-1kka" id="author_tag">AUTHOR</p>
  <p class="gwd-p-edbb gwd-p-1kka gwd-p-3ej1 gwd-p-1a9u" id="link_tag">LINK</p>
  <p class="gwd-p-edbb gwd-p-1kka gwd-p-3ej1 gwd-p-1hx8" id="votes_tag"># of VOTES</p>
  <p class="gwd-p-edbb gwd-p-1kka gwd-p-3ej1 gwd-p-1hx8 gwd-p-1g1m" id="value_tag">VOTES VALUE</p>
  <p class="gwd-p-edbb" id="rank_tag">RANK</p>
  <div class="gwd-div-1d6p" id="spinner">
    <div class="loader" id="loader"></div>
  </div>
  <p class="gwd-p-13ux">@firedream</p>
  <div class="gwd-div-4l28" id="tags_div">
    <select class="gwd-select-15e9" id="tags" onchange="re_start()">
      <option value="all">all</option>
    </select>
    <p class="gwd-p-wpmt">TAGS :</p>
  </div>
  <div class="gwd-div-19pf" id="button_div">
    <input id="addbot" type="button" value=" Add New Bot " class="gwd-input-1lyw" onclick="add_bot()">
  </div>
</body>

</html>